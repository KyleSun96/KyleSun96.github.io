<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Gateway内置过滤器工厂"><meta name="keywords" content="SpringCloud,Gateway"><meta name="author" content="Kyle Sun"><meta name="copyright" content="Kyle Sun"><meta name="theme-color" content="#0078E7"><title>Gateway内置过滤器工厂 | 遇见凯尔</title><link rel="shortcut icon" href="/ico/Archer.ico"><link rel="mask-icon" href="/ico/Archer.ico" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="dns-prefetch" href="https://cos.yunyoujun.cn"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script id="yun-config">
    let Yun = window.Yun || {};
    let CONFIG = {"root":"/","title":"遇见凯尔","version":"0.6.3","anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@700&amp;family=Source+Code+Pro&amp;display=swap" media="none" onload="this.media='all'"><script src="//at.alicdn.com/t/font_1140697_rtqh36oinzl.js" async></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle sidebar-toggle-fixed hty-icon-button"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><aside class="sidebar"><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc sidebar-nav-active hty-icon-button" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"/></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"/></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about" title="Kyle Sun"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="Kyle Sun"></a><div class="site-author-name"><a href="/about/">Kyle Sun</a></div><a class="site-name" href="/about/site.html">遇见凯尔</a><sub class="site-subtitle"></sub><div class="site-desciption">O ever youthful,O ever weeping</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"/></svg></span></a><div class="site-state-item site-state-posts"><a href="/archives" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"/></svg></span><span class="site-state-item-count">15</span></a></div><div class="site-state-item site-state-categories"><a href="/categories" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"/></svg></span><span class="site-state-item-count">6</span></a></div><div class="site-state-item site-state-tags"><a href="/tags" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"/></svg></span><span class="site-state-item-count">12</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="留言板"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"/></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/KyleSun96" title="GitHub" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"/></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:swy0907163@163.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"/></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=395966039" title="网易云音乐" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"/></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/49793838" title="哔哩哔哩" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"/></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="/images/wechat.jpg" title="微信公众号" target="_blank" style="color:#1AAD19"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-2-line"/></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"/></svg></a><a class="links-item hty-icon-button" href="/girls/" title="我的老婆们" style="color:hotpink"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-women-line"/></svg></a></div></div><script defer src="/js/sidebar.js"></script><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-Cloud-Gateway-内置的过滤器工厂"><span class="toc-number">1.</span> <span class="toc-text">Spring Cloud Gateway 内置的过滤器工厂</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#内置的过滤器工厂"><span class="toc-number">1.0.1.</span> <span class="toc-text">内置的过滤器工厂</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、AddRequestHeader-GatewayFilter-Factory"><span class="toc-number">1.0.1.1.</span> <span class="toc-text">1、AddRequestHeader GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2、AddRequestParameter-GatewayFilter-Factory"><span class="toc-number">1.0.1.2.</span> <span class="toc-text">2、AddRequestParameter GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3、AddResponseHeader-GatewayFilter-Factory"><span class="toc-number">1.0.1.3.</span> <span class="toc-text">3、AddResponseHeader GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4、DedupeResponseHeader-GatewayFilter-Factory"><span class="toc-number">1.0.1.4.</span> <span class="toc-text">4、DedupeResponseHeader GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5、Hystrix-GatewayFilter-Factory"><span class="toc-number">1.0.1.5.</span> <span class="toc-text">5、Hystrix GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6、FallbackHeaders-GatewayFilter-Factory"><span class="toc-number">1.0.1.6.</span> <span class="toc-text">6、FallbackHeaders GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7、PrefixPath-GatewayFilter-Factory"><span class="toc-number">1.0.1.7.</span> <span class="toc-text">7、PrefixPath GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8、PreserveHostHeader-GatewayFilter-Factory"><span class="toc-number">1.0.1.8.</span> <span class="toc-text">8、PreserveHostHeader GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9、RequestRateLimiter-GatewayFilter-Factory"><span class="toc-number">1.0.1.9.</span> <span class="toc-text">9、RequestRateLimiter GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10、RedirectTo-GatewayFilter-Factory"><span class="toc-number">1.0.1.10.</span> <span class="toc-text">10、RedirectTo GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11、RemoveHopByHopHeadersFilter-GatewayFilter-Factory"><span class="toc-number">1.0.1.11.</span> <span class="toc-text">11、RemoveHopByHopHeadersFilter GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12、RemoveRequestHeader-GatewayFilter-Factory"><span class="toc-number">1.0.1.12.</span> <span class="toc-text">12、RemoveRequestHeader GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13、RemoveResponseHeader-GatewayFilter-Factory"><span class="toc-number">1.0.1.13.</span> <span class="toc-text">13、RemoveResponseHeader GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14、RewritePath-GatewayFilter-Factory"><span class="toc-number">1.0.1.14.</span> <span class="toc-text">14、RewritePath GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15、RewriteResponseHeader-GatewayFilter-Factory"><span class="toc-number">1.0.1.15.</span> <span class="toc-text">15、RewriteResponseHeader GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16、SaveSession-GatewayFilter-Factory"><span class="toc-number">1.0.1.16.</span> <span class="toc-text">16、SaveSession GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17、secureHeaders-GatewayFilter-Factory"><span class="toc-number">1.0.1.17.</span> <span class="toc-text">17、secureHeaders GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18、SetPath-GatewayFilter-Factory"><span class="toc-number">1.0.1.18.</span> <span class="toc-text">18、SetPath GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19、SetResponseHeader-GatewayFilter-Factory"><span class="toc-number">1.0.1.19.</span> <span class="toc-text">19、SetResponseHeader GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#20、SetStatus-GatewayFilter-Factory"><span class="toc-number">1.0.1.20.</span> <span class="toc-text">20、SetStatus GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21、StripPrefix-GatewayFilter-Factory"><span class="toc-number">1.0.1.21.</span> <span class="toc-text">21、StripPrefix GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22、Retry-GatewayFilter-Factory"><span class="toc-number">1.0.1.22.</span> <span class="toc-text">22、Retry GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#23、RequestSize-GatewayFilter-Factory"><span class="toc-number">1.0.1.23.</span> <span class="toc-text">23、RequestSize GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#24、Modify-Request-Body-GatewayFilter-Factory"><span class="toc-number">1.0.1.24.</span> <span class="toc-text">24、Modify Request Body GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#25、Modify-Response-Body-GatewayFilter-Factory"><span class="toc-number">1.0.1.25.</span> <span class="toc-text">25、Modify Response Body GatewayFilter Factory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#26、Default-Filters"><span class="toc-number">1.0.1.26.</span> <span class="toc-text">26、Default Filters</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://kylesun96.github.io/2020/05/19/Java/SpringCloud/Gateway内置过滤器工厂/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Kyle Sun"><meta itemprop="description" content="Gateway内置过滤器工厂"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="遇见凯尔"></span><header class="post-header"><h1 class="post-title" itemprop="name headline" style="color: undefined">Gateway内置过滤器工厂</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"/></svg></span> <time title="创建时间：2020-05-19 23:49:50" itemprop="dateCreated datePublished" datetime="2020-05-19T23:49:50+08:00">2020-05-19</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"/></svg></span> <time title="修改时间：2020-05-21 17:01:52" itemprop="dateModified" datetime="2020-05-21T17:01:52+08:00">2020-05-21</time></div><div class="post-classify"><span class="post-category"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"/></svg></span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/查询文档/" itemprop="url" rel="index"><span itemprop="text">查询文档</span></a></span> > <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/查询文档/SpringCloud/" itemprop="url" rel="index"><span itemprop="text">SpringCloud</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag" href="/tags/SpringCloud/"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"/></svg></span><span class="tag-name">SpringCloud</span></a><a class="tag" href="/tags/Gateway/"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"/></svg></span><span class="tag-name">Gateway</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content post-markdown"><blockquote>
<p>查询文档，以便于查询和修改 SpringCloud中Gateway内置的过滤器工厂</p>
</blockquote>
<a id="more"></a>

<h1 id="Spring-Cloud-Gateway-内置的过滤器工厂"><a href="#Spring-Cloud-Gateway-内置的过滤器工厂" class="headerlink" title="Spring Cloud Gateway 内置的过滤器工厂"></a>Spring Cloud Gateway 内置的过滤器工厂</h1><h3 id="内置的过滤器工厂"><a href="#内置的过滤器工厂" class="headerlink" title="内置的过滤器工厂"></a>内置的过滤器工厂</h3><p>这里简单将Spring Cloud Gateway内置的所有过滤器工厂整理成了一张表格。如下：</p>
<table>
<thead>
<tr>
<th align="left">过滤器工厂</th>
<th align="left">作用</th>
<th align="left">参数</th>
</tr>
</thead>
<tbody><tr>
<td align="left">AddRequestHeader</td>
<td align="left">为原始请求添加Header</td>
<td align="left">Header的名称及值</td>
</tr>
<tr>
<td align="left">AddRequestParameter</td>
<td align="left">为原始请求添加请求参数</td>
<td align="left">参数名称及值</td>
</tr>
<tr>
<td align="left">AddResponseHeader</td>
<td align="left">为原始响应添加Header</td>
<td align="left">Header的名称及值</td>
</tr>
<tr>
<td align="left">DedupeResponseHeader</td>
<td align="left">剔除响应头中重复的值</td>
<td align="left">需要去重的Header名称及去重策略</td>
</tr>
<tr>
<td align="left">Hystrix</td>
<td align="left">为路由引入Hystrix的断路器保护</td>
<td align="left"><code>HystrixCommand</code>的名称</td>
</tr>
<tr>
<td align="left">FallbackHeaders</td>
<td align="left">为fallbackUri的请求头中添加具体的异常信息</td>
<td align="left">Header的名称</td>
</tr>
<tr>
<td align="left">PrefixPath</td>
<td align="left">为原始请求路径添加前缀</td>
<td align="left">前缀路径</td>
</tr>
<tr>
<td align="left">PreserveHostHeader</td>
<td align="left">为请求添加一个preserveHostHeader=true的属性，路由过滤器会检查该属性以决定是否要发送原始的Host</td>
<td align="left">无</td>
</tr>
<tr>
<td align="left">RequestRateLimiter</td>
<td align="left">用于对请求限流，限流算法为令牌桶</td>
<td align="left">keyResolver、rateLimiter、statusCode、denyEmptyKey、emptyKeyStatus</td>
</tr>
<tr>
<td align="left">RedirectTo</td>
<td align="left">将原始请求重定向到指定的URL</td>
<td align="left">http状态码及重定向的url</td>
</tr>
<tr>
<td align="left">RemoveHopByHopHeadersFilter</td>
<td align="left">为原始请求删除IETF组织规定的一系列Header</td>
<td align="left">默认就会启用，可以通过配置指定仅删除哪些Header</td>
</tr>
<tr>
<td align="left">RemoveRequestHeader</td>
<td align="left">为原始请求删除某个Header</td>
<td align="left">Header名称</td>
</tr>
<tr>
<td align="left">RemoveResponseHeader</td>
<td align="left">为原始响应删除某个Header</td>
<td align="left">Header名称</td>
</tr>
<tr>
<td align="left">RewritePath</td>
<td align="left">重写原始的请求路径</td>
<td align="left">原始路径正则表达式以及重写后路径的正则表达式</td>
</tr>
<tr>
<td align="left">RewriteResponseHeader</td>
<td align="left">重写原始响应中的某个Header</td>
<td align="left">Header名称，值的正则表达式，重写后的值</td>
</tr>
<tr>
<td align="left">SaveSession</td>
<td align="left">在转发请求之前，强制执行<code>WebSession::save</code>操作</td>
<td align="left">无</td>
</tr>
<tr>
<td align="left">secureHeaders</td>
<td align="left">为原始响应添加一系列起安全作用的响应头</td>
<td align="left">无，支持修改这些安全响应头的值</td>
</tr>
<tr>
<td align="left">SetPath</td>
<td align="left">修改原始的请求路径</td>
<td align="left">修改后的路径</td>
</tr>
<tr>
<td align="left">SetResponseHeader</td>
<td align="left">修改原始响应中某个Header的值</td>
<td align="left">Header名称，修改后的值</td>
</tr>
<tr>
<td align="left">SetStatus</td>
<td align="left">修改原始响应的状态码</td>
<td align="left">HTTP 状态码，可以是数字，也可以是字符串</td>
</tr>
<tr>
<td align="left">StripPrefix</td>
<td align="left">用于截断原始请求的路径</td>
<td align="left">使用数字表示要截断的路径的数量</td>
</tr>
<tr>
<td align="left">Retry</td>
<td align="left">针对不同的响应进行重试</td>
<td align="left">retries、statuses、methods、series</td>
</tr>
<tr>
<td align="left">RequestSize</td>
<td align="left">设置允许接收最大请求包的大小。如果请求包大小超过设置的值，则返回 <code>413 Payload Too Large</code></td>
<td align="left">请求包大小，单位为字节，默认值为5M</td>
</tr>
<tr>
<td align="left">ModifyRequestBody</td>
<td align="left">在转发请求之前修改原始请求体内容</td>
<td align="left">修改后的请求体内容</td>
</tr>
<tr>
<td align="left">ModifyResponseBody</td>
<td align="left">修改原始响应体的内容</td>
<td align="left">修改后的响应体内容</td>
</tr>
<tr>
<td align="left">Default</td>
<td align="left">为所有路由添加过滤器</td>
<td align="left">过滤器工厂名称及值</td>
</tr>
</tbody></table>
<p><strong>Tips：</strong>每个过滤器工厂都对应一个实现类，并且这些类的名称必须以<code>GatewayFilterFactory</code>结尾，这是Spring Cloud Gateway的一个约定，例如<code>AddRequestHeader</code>对应的实现类为<code>AddRequestHeaderGatewayFilterFactory</code>。</p>
<hr>
<h4 id="1、AddRequestHeader-GatewayFilter-Factory"><a href="#1、AddRequestHeader-GatewayFilter-Factory" class="headerlink" title="1、AddRequestHeader GatewayFilter Factory"></a>1、AddRequestHeader GatewayFilter Factory</h4><p>为原始请求添加Header，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">add_request_header_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">AddRequestHeader=X-Request-Foo,</span> <span class="string">Bar</span></span><br></pre></td></tr></table></figure>

<p>为原始请求添加名为 <code>X-Request-Foo</code> ，值为 <code>Bar</code> 的请求头</p>
<h4 id="2、AddRequestParameter-GatewayFilter-Factory"><a href="#2、AddRequestParameter-GatewayFilter-Factory" class="headerlink" title="2、AddRequestParameter GatewayFilter Factory"></a>2、AddRequestParameter GatewayFilter Factory</h4><p>为原始请求添加请求参数及值，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">add_request_parameter_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">AddRequestParameter=foo,</span> <span class="string">bar</span></span><br></pre></td></tr></table></figure>

<p>为原始请求添加名为foo，值为bar的参数，即：<code>foo=bar</code></p>
<h4 id="3、AddResponseHeader-GatewayFilter-Factory"><a href="#3、AddResponseHeader-GatewayFilter-Factory" class="headerlink" title="3、AddResponseHeader GatewayFilter Factory"></a>3、AddResponseHeader GatewayFilter Factory</h4><p>为原始响应添加Header，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">add_response_header_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">AddResponseHeader=X-Response-Foo,</span> <span class="string">Bar</span></span><br></pre></td></tr></table></figure>

<p>为原始响应添加名为 <code>X-Request-Foo</code> ，值为 <code>Bar</code> 的响应头</p>
<h4 id="4、DedupeResponseHeader-GatewayFilter-Factory"><a href="#4、DedupeResponseHeader-GatewayFilter-Factory" class="headerlink" title="4、DedupeResponseHeader GatewayFilter Factory"></a>4、DedupeResponseHeader GatewayFilter Factory</h4><p>DedupeResponseHeader可以根据配置的Header名称及去重策略剔除响应头中重复的值，这是Spring Cloud Greenwich SR2提供的新特性，低于这个版本无法使用。</p>
<p>我们在Gateway以及微服务上都设置了CORS（解决跨域）Header的话，如果不做任何配置，那么请求 -&gt; 网关 -&gt; 微服务，获得的CORS Header的值，就将会是这样的：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Access-Control-Allow-Credentials: <span class="literal">true</span>, <span class="literal">true</span></span><br><span class="line">Access-Control-Allow-Origin: https://musk.mars, https://musk.mars</span><br></pre></td></tr></table></figure>

<p>可以看到这两个Header的值都重复了，若想把这两个Header的值去重的话，就需要使用到DedupeResponseHeader，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">dedupe_response_header_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line">        <span class="comment"># 若需要去重的Header有多个，使用空格分隔</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">DedupeResponseHeader=Access-Control-Allow-Credentials</span> <span class="string">Access-Control-Allow-Origin</span></span><br></pre></td></tr></table></figure>

<p>去重策略：</p>
<ul>
<li>RETAIN_FIRST：默认值，保留第一个值</li>
<li>RETAIN_LAST：保留最后一个值</li>
<li>RETAIN_UNIQUE：保留所有唯一值，以它们第一次出现的顺序保留</li>
</ul>
<p>若想对该过滤器工厂有个比较全面的了解的话，建议阅读该过滤器工厂的源码，因为源码里有详细的注释及示例，比官方文档写得还好：<code>org.springframework.cloud.gateway.filter.factory.DedupeResponseHeaderGatewayFilterFactory</code></p>
<h4 id="5、Hystrix-GatewayFilter-Factory"><a href="#5、Hystrix-GatewayFilter-Factory" class="headerlink" title="5、Hystrix GatewayFilter Factory"></a>5、Hystrix GatewayFilter Factory</h4><p>为路由引入Hystrix的断路器保护，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">hystrix_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Hystrix=myCommandName</span></span><br></pre></td></tr></table></figure>

<p>Hystrix是Spring Cloud第一代容错组件，不过已经进入维护模式，未来Hystrix会被Spring Cloud移除掉，取而代之的是Alibaba Sentinel/Resilience4J。所以本文不做详细介绍了，感兴趣的话可以参考官方文档：</p>
<ul>
<li><a href="https://cloud.spring.io/spring-cloud-static/Greenwich.SR2/single/spring-cloud.html#hystrix" target="_blank" rel="noopener">Hystrix GatewayFilter Factory</a></li>
</ul>
<h4 id="6、FallbackHeaders-GatewayFilter-Factory"><a href="#6、FallbackHeaders-GatewayFilter-Factory" class="headerlink" title="6、FallbackHeaders GatewayFilter Factory"></a>6、FallbackHeaders GatewayFilter Factory</h4><p>同样是对Hystrix的支持，上一小节所介绍的过滤器工厂支持一个配置参数：<code>fallbackUri</code>，该配置用于当发生异常时将请求转发到一个特定的uri上。而<code>FallbackHeaders</code>这个过滤工厂可以在转发请求到该uri时添加一个Header，这个Header的值为具体的异常信息。配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">ingredients</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">lb://ingredients</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=//ingredients/**</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">Hystrix</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line"><span class="attr">            name:</span> <span class="string">fetchIngredients</span></span><br><span class="line"><span class="attr">            fallbackUri:</span> <span class="attr">forward:/fallback</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">ingredients-fallback</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://localhost:9994</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/fallback</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">FallbackHeaders</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line"><span class="attr">            executionExceptionTypeHeaderName:</span> <span class="string">Test-Header</span></span><br></pre></td></tr></table></figure>

<p>这里也不做详细介绍了，感兴趣可以参考官方文档：</p>
<ul>
<li><a href="https://cloud.spring.io/spring-cloud-static/Greenwich.SR2/single/spring-cloud.html#fallback-headers" target="_blank" rel="noopener">FallbackHeaders GatewayFilter Factory</a></li>
</ul>
<h4 id="7、PrefixPath-GatewayFilter-Factory"><a href="#7、PrefixPath-GatewayFilter-Factory" class="headerlink" title="7、PrefixPath GatewayFilter Factory"></a>7、PrefixPath GatewayFilter Factory</h4><p>为原始的请求路径添加一个前缀路径，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">prefixpath_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">PrefixPath=/mypath</span></span><br></pre></td></tr></table></figure>

<p>该配置使访问<code>${GATEWAY_URL}/hello</code> 会转发到<code>https://example.org/mypath/hello</code></p>
<h4 id="8、PreserveHostHeader-GatewayFilter-Factory"><a href="#8、PreserveHostHeader-GatewayFilter-Factory" class="headerlink" title="8、PreserveHostHeader GatewayFilter Factory"></a>8、PreserveHostHeader GatewayFilter Factory</h4><p>为请求添加一个preserveHostHeader=true的属性，路由过滤器会检查该属性以决定是否要发送原始的Host Header。配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">preserve_host_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">PreserveHostHeader</span></span><br></pre></td></tr></table></figure>

<p>如果不设置，那么名为 <code>Host</code> 的Header将由Http Client控制</p>
<h4 id="9、RequestRateLimiter-GatewayFilter-Factory"><a href="#9、RequestRateLimiter-GatewayFilter-Factory" class="headerlink" title="9、RequestRateLimiter GatewayFilter Factory"></a>9、RequestRateLimiter GatewayFilter Factory</h4><p>用于对请求进行限流，限流算法为令牌桶。配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">requestratelimiter_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">RequestRateLimiter</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line">            <span class="string">redis-rate-limiter.replenishRate:</span> <span class="number">10</span></span><br><span class="line">            <span class="string">redis-rate-limiter.burstCapacity:</span> <span class="number">20</span></span><br></pre></td></tr></table></figure>

<p>由于另一篇文章中已经介绍过如何使用该过滤器工厂实现网关限流，所以这里就不再赘述了：</p>
<ul>
<li><a href="https://blog.51cto.com/zero01/2430532" target="_blank" rel="noopener">Spring Cloud Gateway - 扩展</a></li>
</ul>
<p>或者参考官方文档：</p>
<ul>
<li><a href="https://cloud.spring.io/spring-cloud-static/Greenwich.SR2/single/spring-cloud.html#_requestratelimiter_gatewayfilter_factory" target="_blank" rel="noopener">RequestRateLimiter GatewayFilter Factory</a></li>
</ul>
<h4 id="10、RedirectTo-GatewayFilter-Factory"><a href="#10、RedirectTo-GatewayFilter-Factory" class="headerlink" title="10、RedirectTo GatewayFilter Factory"></a>10、RedirectTo GatewayFilter Factory</h4><p>将原始请求重定向到指定的Url，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">redirect_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">RedirectTo=302,</span> <span class="attr">https://acme.org</span></span><br></pre></td></tr></table></figure>

<p>该配置使访问 <code>${GATEWAY_URL}/hello</code> 会被重定向到 <code>https://acme.org/hello</code> ，并且携带一个 <code>Location:http://acme.org</code> 的Header，而返回客户端的HTTP状态码为302</p>
<p>注意事项：</p>
<ul>
<li>HTTP状态码应为3xx，例如301</li>
<li>URL必须是合法的URL，该URL会作为<code>Location</code> Header的值</li>
</ul>
<h4 id="11、RemoveHopByHopHeadersFilter-GatewayFilter-Factory"><a href="#11、RemoveHopByHopHeadersFilter-GatewayFilter-Factory" class="headerlink" title="11、RemoveHopByHopHeadersFilter GatewayFilter Factory"></a>11、RemoveHopByHopHeadersFilter GatewayFilter Factory</h4><p>为原始请求删除<a href="https://tools.ietf.org/html/draft-ietf-httpbis-p1-messaging-14#section-7.1.3" target="_blank" rel="noopener">IETF</a>组织规定的一系列Header，默认删除的Header如下：</p>
<ul>
<li>Connection</li>
<li>Keep-Alive</li>
<li>Proxy-Authenticate</li>
<li>Proxy-Authorization</li>
<li>TE</li>
<li>Trailer</li>
<li>Transfer-Encoding</li>
<li>Upgrade</li>
</ul>
<p>可以通过配置去指定仅删除哪些Header，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      filter:</span></span><br><span class="line"><span class="attr">        remove-hop-by-hop:</span></span><br><span class="line">          <span class="comment"># 多个Header使用逗号（,）分隔</span></span><br><span class="line"><span class="attr">          headers:</span> <span class="string">Connection,Keep-Alive</span></span><br></pre></td></tr></table></figure>

<h4 id="12、RemoveRequestHeader-GatewayFilter-Factory"><a href="#12、RemoveRequestHeader-GatewayFilter-Factory" class="headerlink" title="12、RemoveRequestHeader GatewayFilter Factory"></a>12、RemoveRequestHeader GatewayFilter Factory</h4><p>为原始请求删除某个Header，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">removerequestheader_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">RemoveRequestHeader=X-Request-Foo</span></span><br></pre></td></tr></table></figure>

<p>删除原始请求中名为 <code>X-Request-Foo</code> 的请求头</p>
<h4 id="13、RemoveResponseHeader-GatewayFilter-Factory"><a href="#13、RemoveResponseHeader-GatewayFilter-Factory" class="headerlink" title="13、RemoveResponseHeader GatewayFilter Factory"></a>13、RemoveResponseHeader GatewayFilter Factory</h4><p>为原始响应删除某个Header，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">removeresponseheader_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">RemoveResponseHeader=X-Response-Foo</span></span><br></pre></td></tr></table></figure>

<p>删除原始响应中名为 <code>X-Request-Foo</code> 的响应头</p>
<h4 id="14、RewritePath-GatewayFilter-Factory"><a href="#14、RewritePath-GatewayFilter-Factory" class="headerlink" title="14、RewritePath GatewayFilter Factory"></a>14、RewritePath GatewayFilter Factory</h4><p>通过正则表达式重写原始的请求路径，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">rewritepath_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/foo/**</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line">        <span class="comment"># 参数1为原始路径的正则表达式，参数2为重写后路径的正则表达式</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">RewritePath=/foo/(?&lt;segment&gt;.*),</span> <span class="string">/$\&#123;segment&#125;</span></span><br></pre></td></tr></table></figure>

<p>该配置使得访问 <code>/foo/bar</code> 时，会将路径重写为<code>/bar</code> 再进行转发，也就是会转发到 <code>https://example.org/bar</code>。需要注意的是：由于YAML语法，需用<code>$\</code> 替换 <code>$</code></p>
<h4 id="15、RewriteResponseHeader-GatewayFilter-Factory"><a href="#15、RewriteResponseHeader-GatewayFilter-Factory" class="headerlink" title="15、RewriteResponseHeader GatewayFilter Factory"></a>15、RewriteResponseHeader GatewayFilter Factory</h4><p>重写原始响应中的某个Header，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">rewriteresponseheader_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line">        <span class="comment"># 参数1为Header名称，参数2为值的正则表达式，参数3为重写后的值</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">RewriteResponseHeader=X-Response-Foo,</span> <span class="string">password=[^&amp;]+,</span> <span class="string">password=***</span></span><br></pre></td></tr></table></figure>

<p>该配置的意义在于：如果响应头中 <code>X-Response-Foo</code> 的值为<code>/42?user=ford&amp;password=omg!what&amp;flag=true</code>，那么就会被按照配置的值重写成<code>/42?user=ford&amp;password=***&amp;flag=true</code>，也就是把其中的<code>password=omg!what</code>重写成了<code>password=***</code></p>
<h4 id="16、SaveSession-GatewayFilter-Factory"><a href="#16、SaveSession-GatewayFilter-Factory" class="headerlink" title="16、SaveSession GatewayFilter Factory"></a>16、SaveSession GatewayFilter Factory</h4><p>在转发请求之前，强制执行<code>WebSession::save</code>操作，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">save_session</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/foo/**</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">SaveSession</span></span><br></pre></td></tr></table></figure>

<p>主要用在那种像 Spring Session 延迟数据存储（数据不是立刻持久化）的，并希望在请求转发前确保session状态保存情况。如果你将Spring Secutiry于Spring Session集成使用，并想确保安全信息都传到下游机器，你就需要配置这个filter。</p>
<h4 id="17、secureHeaders-GatewayFilter-Factory"><a href="#17、secureHeaders-GatewayFilter-Factory" class="headerlink" title="17、secureHeaders GatewayFilter Factory"></a>17、secureHeaders GatewayFilter Factory</h4><p>secureHeaders过滤器工厂主要是参考了<a href="https://blog.appcanary.com/2017/http-security-headers.html" target="_blank" rel="noopener">这篇博客</a>中的建议，为原始响应添加了一系列起安全作用的响应头。默认会添加如下Headers（包括值）：</p>
<ul>
<li><code>X-Xss-Protection:1; mode=block</code></li>
<li><code>Strict-Transport-Security:max-age=631138519</code></li>
<li><code>X-Frame-Options:DENY</code></li>
<li><code>X-Content-Type-Options:nosniff</code></li>
<li><code>Referrer-Policy:no-referrer</code></li>
<li><code>Content-Security-Policy:default-src &#39;self&#39; https:; font-src &#39;self&#39; https: data:; img-src &#39;self&#39; https: data:; object-src &#39;none&#39;; script-src https:; style-src &#39;self&#39; https: &#39;unsafe-inline&#39;</code></li>
<li><code>X-Download-Options:noopen</code></li>
<li><code>X-Permitted-Cross-Domain-Policies:none</code></li>
</ul>
<p>如果你想修改这些Header的值，那么就需要使用这些Headers对应的后缀，如下：</p>
<ul>
<li><code>xss-protection-header</code></li>
<li><code>strict-transport-security</code></li>
<li><code>frame-options</code></li>
<li><code>content-type-options</code></li>
<li><code>referrer-policy</code></li>
<li><code>content-security-policy</code></li>
<li><code>download-options</code></li>
<li><code>permitted-cross-domain-policies</code></li>
</ul>
<p>配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      filter:</span></span><br><span class="line"><span class="attr">        secure-headers:</span></span><br><span class="line">          <span class="comment"># 修改 X-Xss-Protection 的值为 2; mode=unblock</span></span><br><span class="line"><span class="attr">          xss-protection-header:</span> <span class="number">2</span><span class="string">;</span> <span class="string">mode=unblock</span></span><br></pre></td></tr></table></figure>

<p>如果想禁用某些Header，可使用如下配置：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      filter:</span></span><br><span class="line"><span class="attr">        secure-headers:</span></span><br><span class="line">          <span class="comment"># 多个使用逗号（,）分隔</span></span><br><span class="line"><span class="attr">          disable:</span> <span class="string">frame-options,download-options</span></span><br></pre></td></tr></table></figure>

<h4 id="18、SetPath-GatewayFilter-Factory"><a href="#18、SetPath-GatewayFilter-Factory" class="headerlink" title="18、SetPath GatewayFilter Factory"></a>18、SetPath GatewayFilter Factory</h4><p>修改原始的请求路径，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">setpath_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/foo/&#123;segment&#125;</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">SetPath=/&#123;segment&#125;</span></span><br></pre></td></tr></table></figure>

<p>该配置使访问 <code>${GATEWAY_URL}/foo/bar</code> 时会转发到 <code>https://example.org/bar</code> ，也就是原本的<code>/foo/bar</code>被修改为了<code>/bar</code></p>
<h4 id="19、SetResponseHeader-GatewayFilter-Factory"><a href="#19、SetResponseHeader-GatewayFilter-Factory" class="headerlink" title="19、SetResponseHeader GatewayFilter Factory"></a>19、SetResponseHeader GatewayFilter Factory</h4><p>修改原始响应中某个Header的值，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">setresponseheader_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">SetResponseHeader=X-Response-Foo,</span> <span class="string">Bar</span></span><br></pre></td></tr></table></figure>

<p>将原始响应中 <code>X-Response-Foo</code> 的值修改为 <code>Bar</code></p>
<h4 id="20、SetStatus-GatewayFilter-Factory"><a href="#20、SetStatus-GatewayFilter-Factory" class="headerlink" title="20、SetStatus GatewayFilter Factory"></a>20、SetStatus GatewayFilter Factory</h4><p>修改原始响应的状态码，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">setstatusstring_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line">        <span class="comment"># 字符串形式</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">SetStatus=BAD_REQUEST</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">setstatusint_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">https://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line">        <span class="comment"># 数字形式</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">SetStatus=401</span></span><br></pre></td></tr></table></figure>

<p>SetStatusd的值可以是数字，也可以是字符串。但一定要是Spring <code>HttpStatus</code> 枚举类中的值。上面这两种配置都可以返回401这个HTTP状态码。</p>
<h4 id="21、StripPrefix-GatewayFilter-Factory"><a href="#21、StripPrefix-GatewayFilter-Factory" class="headerlink" title="21、StripPrefix GatewayFilter Factory"></a>21、StripPrefix GatewayFilter Factory</h4><p>用于截断原始请求的路径，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">nameRoot</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://nameservice</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/name/**</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line">        <span class="comment"># 数字表示要截断的路径的数量</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">StripPrefix=2</span></span><br></pre></td></tr></table></figure>

<p>如上配置，如果请求的路径为 <code>/name/bar/foo</code> ，那么则会截断成<code>/foo</code>后进行转发 ，也就是会截断2个路径。</p>
<h4 id="22、Retry-GatewayFilter-Factory"><a href="#22、Retry-GatewayFilter-Factory" class="headerlink" title="22、Retry GatewayFilter Factory"></a>22、Retry GatewayFilter Factory</h4><p>针对不同的响应进行重试，例如可以针对HTTP状态码进行重试，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">retry_test</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://localhost:8080/flakey</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Host=*.retry.com</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">Retry</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line"><span class="attr">            retries:</span> <span class="number">3</span></span><br><span class="line"><span class="attr">            statuses:</span> <span class="string">BAD_GATEWAY</span></span><br></pre></td></tr></table></figure>

<p>可配置如下参数：</p>
<ul>
<li><code>retries</code>：重试次数</li>
<li><code>statuses</code>：需要重试的状态码，取值在 <code>org.springframework.http.HttpStatus</code> 中</li>
<li><code>methods</code>：需要重试的请求方法，取值在 <code>org.springframework.http.HttpMethod</code> 中</li>
<li><code>series</code>：HTTP状态码序列，取值在 <code>org.springframework.http.HttpStatus.Series</code> 中</li>
</ul>
<h4 id="23、RequestSize-GatewayFilter-Factory"><a href="#23、RequestSize-GatewayFilter-Factory" class="headerlink" title="23、RequestSize GatewayFilter Factory"></a>23、RequestSize GatewayFilter Factory</h4><p>设置允许接收最大请求包的大小，配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">request_size_route</span></span><br><span class="line"><span class="attr">      uri:</span> <span class="attr">http://localhost:8080/upload</span></span><br><span class="line"><span class="attr">      predicates:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">Path=/upload</span></span><br><span class="line"><span class="attr">      filters:</span></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">RequestSize</span></span><br><span class="line"><span class="attr">        args:</span></span><br><span class="line">          <span class="comment"># 单位为字节</span></span><br><span class="line"><span class="attr">          maxSize:</span> <span class="number">5000000</span></span><br></pre></td></tr></table></figure>

<p>如果请求包大小超过设置的值，则会返回 <code>413 Payload Too Large</code>以及一个<code>errorMessage</code></p>
<h4 id="24、Modify-Request-Body-GatewayFilter-Factory"><a href="#24、Modify-Request-Body-GatewayFilter-Factory" class="headerlink" title="24、Modify Request Body GatewayFilter Factory"></a>24、Modify Request Body GatewayFilter Factory</h4><p>在转发请求之前修改原始请求体内容，该过滤器工厂只能通过代码配置，不支持在配置文件中配置。代码示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RouteLocator <span class="title">routes</span><span class="params">(RouteLocatorBuilder builder)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> builder.routes()</span><br><span class="line">        .route(<span class="string">"rewrite_request_obj"</span>, r -&gt; r.host(<span class="string">"*.rewriterequestobj.org"</span>)</span><br><span class="line">            .filters(f -&gt; f.prefixPath(<span class="string">"/httpbin"</span>)</span><br><span class="line">                .modifyRequestBody(String.class, Hello.class, MediaType.APPLICATION_JSON_VALUE,</span><br><span class="line">                    (exchange, s) -&gt; <span class="keyword">return</span> Mono.just(<span class="keyword">new</span> Hello(s.toUpperCase())))).uri(uri))</span><br><span class="line">        .build();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    String message;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Hello</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Hello</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Tips：该过滤器工厂处于 <strong>BETA</strong> 状态，未来API可能会变化，生产环境请慎用</p>
</blockquote>
<h4 id="25、Modify-Response-Body-GatewayFilter-Factory"><a href="#25、Modify-Response-Body-GatewayFilter-Factory" class="headerlink" title="25、Modify Response Body GatewayFilter Factory"></a>25、Modify Response Body GatewayFilter Factory</h4><p>可用于修改原始响应体的内容，该过滤器工厂同样只能通过代码配置，不支持在配置文件中配置。代码示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RouteLocator <span class="title">routes</span><span class="params">(RouteLocatorBuilder builder)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> builder.routes()</span><br><span class="line">        .route(<span class="string">"rewrite_response_upper"</span>, r -&gt; r.host(<span class="string">"*.rewriteresponseupper.org"</span>)</span><br><span class="line">            .filters(f -&gt; f.prefixPath(<span class="string">"/httpbin"</span>)</span><br><span class="line">                .modifyResponseBody(String.class, String.class,</span><br><span class="line">                    (exchange, s) -&gt; Mono.just(s.toUpperCase()))).uri(uri)</span><br><span class="line">        .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Tips：该过滤器工厂处于 <strong>BETA</strong> 状态，未来API可能会变化，生产环境请慎用</p>
</blockquote>
<h4 id="26、Default-Filters"><a href="#26、Default-Filters" class="headerlink" title="26、Default Filters"></a>26、Default Filters</h4><p>Default Filters用于为所有路由添加过滤器工厂，也就是说通过Default Filter所配置的过滤器工厂会作用到所有的路由上。配置示例：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      default-filters:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">AddResponseHeader=X-Response-Default-Foo,</span> <span class="string">Default-Bar</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">PrefixPath=/httpbin</span></span><br></pre></td></tr></table></figure>

<hr>
<p>官方文档：</p>
<ul>
<li><a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.1.0.RELEASE/single/spring-cloud-gateway.html#_gatewayfilter_factories" target="_blank" rel="noopener">GatewayFilter Factories</a></li>
</ul>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"/></svg></span><div id="reward-comment">我很可爱，请给我钱</div><div id="qr" style="display:none;"><div style="display:inline-block"><a href="/images/alipay-qrcode.jpg"><img loading="lazy" src="/images/alipay-qrcode.jpg" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"/></svg></span></div></div><div style="display:inline-block"><a href="/images/wechatpay-qrcode.jpg"><img loading="lazy" src="/images/wechatpay-qrcode.jpg" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"/></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>Kyle Sun</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://kylesun96.github.io/2020/05/19/Java/SpringCloud/Gateway内置过滤器工厂/" title="Gateway内置过滤器工厂">https://kylesun96.github.io/2020/05/19/Java/SpringCloud/Gateway内置过滤器工厂/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"/></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"/></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"/></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"/></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2020/05/22/Java/总结梳理/SpringCloud整合练习（上）/" rel="prev" title="SpringCloud整合练习"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"/></svg><span class="post-nav-text">SpringCloud整合练习</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2020/05/19/Java/SpringCloud/Eureka 全部配置/" rel="next" title="Eureka 全部配置"><span class="post-nav-text">Eureka 全部配置</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"/></svg></a></div></div></div><div id="comment"><div class="comment-tooltip text-center"><span>若您无 GitHub 账号，可直接在下方匿名评论。</span><br><span>若您想及时得到回复提醒，建议跳转 GitHub Issues 评论。</span><br><span>若没有本文 Issue，您可以使用 Comment 模版新建。</span><br><a class="hty-button hty-button--raised" id="github-issues" href="https://github.com/KyleSun/kylesun96.github.io/issues?q=is:issue+Gateway内置过滤器工厂">GitHub Issues</a></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 – 2020 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"/></svg></span><span class="author"> Kyle Sun</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v3.9.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v0.6.3</span></div><div class="live_time"><span>本博客已萌萌哒地运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  window.setTimeout(blog_live_time, 1000);
  const start = new Date('2019-09-27T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"/></svg><svg class="progress-circle-container" viewbox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"/></svg></a></div><script defer src="/js/hexo-theme-yun.js"></script></body></html>